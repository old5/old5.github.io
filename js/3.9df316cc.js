(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{HEM2:function(t,s,a){"use strict";a.r(s);var r=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("q-page",{staticClass:"relative-position",attrs:{padding:""}},[a("q-card",{staticClass:"q-mt-md relative-position"},[a("q-card-title",[t._v("\n      玩家概况\n      "),t.pAddr?a("q-btn",{staticClass:"q-ml-md float-right text-green",attrs:{dense:"",size:"sm"},on:{click:t.checkMe}},[t._v("查看本机")]):t._e()],1),a("q-card-separator"),a("q-card-main",[t.address?a("p",[t._v("地址："),a("span",{staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.address))])]):a("div",[a("p",{staticClass:"text-red"},[t._v("\n          请先安装"),a("a",{attrs:{href:"https://github.com/nebulasio/WebExtensionWallet/blob/master/README.md",target:"_blank"}},[t._v("钱包插件")]),t._v("，或"),a("a",{attrs:{href:"https://nano.nebulas.io/index.html",target:"_blank"}},[t._v("手机NAS钱包 ")])]),a("p",{staticClass:"text-red"},[t._v("\n          若已经安装，请前往首页出牌成功后返回查看")]),a("p")]),a("p",[t._v("已投入： "+t._s((t.player.depositedNAS||0)/Math.pow(10,18))+" NAS")]),a("p",[t._v("共收割： "+t._s((t.player.trades||[]).length)+" 次")]),a("p",[t._v("已赢得： "+t._s((t.player.earnedNAS||0)/Math.pow(10,18))+" NAS")])])],1),a("q-card",{staticClass:"q-mt-xl relative-position"},[a("q-card-title",[t._v("\n      收割记录\n    ")]),a("q-card-separator"),a("q-card-main",t._l(t.trades,function(s,r){return a("div",[a("p",[t._v("#"+t._s(r+1)+", "+t._s(new Date(1e3*s.created).toLocaleString()))]),a("p",[t._v("共收割"+t._s(s.cardsNum)+"张牌，"+t._s(s.NAS/Math.pow(10,18))+" NAS")]),a("div",{staticClass:"q-my-md row justify-center"},t._l(s.cards,function(s,r){return a("div",{staticClass:"column q-ma-sm q-pa-sm shadow-4 relative-position card",style:{background:s.playerAddress==t.address?"lightblue":""},on:{click:function(a){t.openCardInfo(s)}}},[a("div",{staticClass:"absolute shadow-1 bg-yellow",staticStyle:{top:"-10px",left:"-10px"}},[t._v("\n              #"+t._s(r+1)+"\n            ")]),a("img",{attrs:{src:"../statics/cards/PNG/"+s.type+"-"+s.symbol+".png",width:"60px"}}),a("div",{staticClass:"cardFoot q-pt-sm row justify-center "},[a("span",{staticClass:"text-weight-bolder q-mx-sm "},[t._v(t._s(s.betNAS/Math.pow(10,18))+" ")]),a("span",{staticClass:"text-faded "},[t._v("NAS")])])])})),a("hr")])}))],1),a("div",{staticClass:"q-caption float-right text-faded"},[t._v("*仅显示最近10条")]),a("q-card",{staticClass:"q-mt-xl relative-position"},[a("q-card-title",[t._v("\n      出牌记录\n    ")]),a("q-card-separator"),a("q-card-main",[a("div",{staticClass:"q-my-md row justify-center "},t._l(t.cards,function(s,r){return a("div",{staticClass:"column q-ma-sm q-pa-sm shadow-4 relative-position card",on:{click:function(a){t.openCardInfo(s)}}},[a("div",{staticClass:"absolute shadow-1 bg-yellow",staticStyle:{top:"-14px",left:"0px"}},[t._v("\n           "+t._s(s.trainId)+"号火车\n          ")]),a("img",{attrs:{src:"../statics/cards/PNG/"+s.type+"-"+s.symbol+".png",width:"60px"}}),a("div",{staticClass:"cardFoot q-pt-sm row justify-center "},[a("span",{staticClass:"text-weight-bolder q-mx-sm "},[t._v(t._s(s.betNAS/Math.pow(10,18))+" ")]),a("span",{staticClass:"text-faded "},[t._v("NAS")])])])}))])],1),a("div",{staticClass:"q-caption float-right text-faded"},[t._v("*仅显示最近10条")]),a("q-card",{staticClass:"q-mt-xl relative-position"},[a("q-card-title",[t._v("\n     创建的房间 \n    ")]),a("q-card-separator"),a("q-card-main",t._l(t.myTrains,function(s,r){return a("div",[a("router-link",{attrs:{to:"/train/"+s.id}},[t._v("\t"+t._s(s.id)+"号， "+t._s(s.name)+"，创建于 "+t._s(new Date(1e3*s.created).toLocaleString()))])],1)}))],1),a("div",{staticClass:"q-caption float-right text-faded"},[t._v("*仅显示最近10条")]),a("q-modal",{staticClass:"relative-position",attrs:{minimized:"","content-css":{padding:"20px"}},model:{value:t.cardInfo,callback:function(s){t.cardInfo=s},expression:"cardInfo"}},[a("div",{staticClass:"q-display-1 q-mb-md"},[t._v("卡牌信息")]),a("div",{staticClass:"row"},[a("div",{staticClass:"q-mr-sm q-pt-sm"},[a("img",{staticClass:" shadow-1 ",attrs:{src:"../statics/cards/PNG/"+(t.curCard.png||"default")+".png",width:"60px"}})]),a("div",[a("p",[a("router-link",{attrs:{to:"player?pAddr="+t.curCard.playerAddress}},[t._v("玩家："+t._s(t.curCard.shortAddr))])],1),a("p",[t._v("出价："+t._s(t.curCard.betNAS/Math.pow(10,18))+"   NAS")]),a("p",[a("router-link",{attrs:{to:"/train/"+t.curCard.trainId}},[t._v("火车编号："+t._s(t.curCard.trainId)+" ")])],1),a("p",{staticStyle:{"font-size":"12px"}},[t._v("时间："+t._s(t.curCard.dateStr))])])]),a("q-btn",{staticClass:"float-right",attrs:{color:"orange",label:"关闭"},on:{click:function(s){t.cardInfo=!1}}})],1),a("q-inner-loading",{attrs:{visible:t.loading}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)},i=[];r._withStripped=!0;a("9VmF");var e={data:function(){return{isMobile:!1,isDesktop:!1,isIOS:!1,isAndroid:!1,blockchain:{},contract:"",address:"",loading:!1,player:{},cards:[],trades:[],curCard:{},cardInfo:!1,myTrains:[]}},computed:{pAddr:function(){return this.$route.query.pAddr}},mounted:function(){this.isMobile=this.$q.platform.is.mobile,this.isDesktop=this.$q.platform.is.desktop,this.isIOS=this.$q.platform.is.ios,this.isAndroid=this.$q.platform.is.android,this.loading=!0,setTimeout(this.check,1e3),setTimeout(this.getMyTrains,1200)},methods:{openCardInfo:function(t){this.curCard=t;var s=t.playerAddress;this.curCard.shortAddr=s.substr(0,6)+"...."+s.substr(-6,6),this.curCard.dateStr=new Date(1e3*t.created).toLocaleString(),this.curCard.png=t.type+"-"+t.symbol,this.cardInfo=!0},check:function(){this.blockchain=this.$store.state.blockchain.blockchain,this.contract=this.$store.state.blockchain.contract,this.address=this.$store.state.blockchain.address,this.address||(this.address=this.$q.localStorage.get.item("address")),this.pAddr&&(this.address=this.pAddr),this.loading=!0,this.getPlayer()},checkMe:function(){this.$router.push({path:"player"}),this.check()},getPlayer:function(){var t=this,s=this.address;if(s){var a="0",r="0",i="1000000",e="2000000",n="getPlayer",o='["10","10","10"]',d={function:n,args:o},c=t.contract;t.loading=!0,t.meta={},t.cards=[],t.blockchain.neb.api.call(s,c,a,r,i,e,d).then(function(s){if(t.loading=!1,!s.result.startsWith("Error")&&JSON.parse(s.result)){var a=JSON.parse(s.result);t.player=a,t.cards=a.cards,t.trades=a.trades}}).catch(function(s){t.loading=!1,console.log("error:"+s.message)})}else this.loading=!1},getMyTrains:function(){var t=this,s=this.address;if(s){var a="0",r="0",i="1000000",e="2000000",n="getMyCreatedTrains",o='["0","100"]',d={function:n,args:o},c=t.contract;t.meta={},t.cards=[],t.blockchain.neb.api.call(s,c,a,r,i,e,d).then(function(s){!s.result.startsWith("Error")&&JSON.parse(s.result)&&(t.myTrains=JSON.parse(s.result),console.log(t.myTrains))}).catch(function(t){console.log("error:"+t.message)})}}}},n=e,o=(a("qqmF"),a("KHd+")),d=Object(o["a"])(n,r,i,!1,null,null,null);s["default"]=d.exports},Qkta:function(t,s,a){},qqmF:function(t,s,a){"use strict";var r=a("Qkta"),i=a.n(r);i.a}}]);